"use strict";{const alertList=[],popup=document.createElement("section");popup.classList.add("webui-alerts-popup"),popup.style.display="block",popup.style.position="fixed",popup.style.bottom=0,popup.style.right=0,popup.style.overflow="visible",document.body.appendChild(popup);let alertTitle="Alerts",popupTiming=5e3;function getAlertHeader(){const container=document.createElement("header");return container.style.padding="var(--padding)",container.setAttribute("slot","header"),container.innerHTML=alertTitle,container}function getAlertContent(){const container=document.createElement("section");if(container.style.padding="var(--padding)",0===alertList.length)container.innerHTML='<webui-alert variant="info" show>You have no alerts at this time.</webui-alert>';else{let index=0;for(;index<alertList.length;){let alert=alertList[index];alert.userclosed?alertList.splice(index,1):(alert.setAttribute("show",!0),index++,container.appendChild(alert))}}return container}function showAlertsInDialog(){webuiDialog({title:getAlertHeader(),content:getAlertContent(),confirm:"Close"})}function showAlertsInDrawer(drawer){let el=document.querySelector(drawer);if(el){if(el.classList.contains("open"))return el.classList.remove("open"),void setTimeout((()=>showAlertsInDrawer(drawer)),500);el.innerHTML="",el.appendChild(getAlertHeader()),el.appendChild(getAlertContent()),setTimeout((()=>{el.classList.add("open")}),100)}else showAlertsInDialog()}webui.define("webui-alerts",{preload:"fa alert dialogs",constructor:t=>{t.count=0,t.icon=t.template.querySelector("webui-icon"),t.btnClose=t.template.querySelector("#close"),window.webuiAlert||(window.webuiAlert=(message,variant)=>{let alert=document.createElement("webui-alert");message.nodeName?alert.appendChild(message):alert.innerHTML=message,alert.setAttribute("variant",variant||"danger"),alert.setAttribute("show",!0),alert.userclosed=!1,alertList.push(alert),t.count+=1,t.icon.setAttribute("count",t.count.toLocaleString()),popup.appendChild(alert),setTimeout((()=>{alert.parentNode===popup&&alert.removeAttribute("show")}),popupTiming)}),t.addEventListener("click",(_ev=>(t.drawer?showAlertsInDrawer(t.drawer):showAlertsInDialog(),!0))),setTimeout((()=>t.checkCounts()),1e3)},attr:["data-toggleclass","data-title"],attrChanged:(t,property,value)=>{switch(property){case"dataTitle":alertTitle=value;break;case"dataPopup":let timing=parseInt(value);timing&&(popupTiming=timing);break;case"dataToggleclass":t.drawer=value.split("|")[0]}},checkCounts:function(){let newCount=0;alertList.map((a=>{a.userclosed||newCount++})),newCount!=this.count&&(this.count=newCount,this.icon.setAttribute("count",0===newCount?"":newCount.toLocaleString())),setTimeout((()=>this.checkCounts()),1e3)},shadowTemplate:'\n<style type="text/css">\n:host {\ndisplay:inline-flex;\ncursor:pointer;\npadding:1px;\nalign-items:center;\njustify-content:center;\n}\n</style>\n<webui-icon icon="bell"></webui-icon>\n'})}