"use strict";{const alertList=[],popup=webui.create("section");popup.classList.add("webui-alerts-popup"),popup.style.display="block",popup.style.position="fixed",popup.style.bottom="30px",popup.style.right=0,popup.style.overflow="visible",document.body.appendChild(popup);let alertTitle="Alerts",popupTiming=5e3;function getAlertHeader(){const container=webui.create("header");return container.style.padding="var(--padding)",container.setAttribute("slot","header"),container.innerHTML=alertTitle,container}function getAlertContent(){const container=webui.create("section");if(container.style.padding="var(--padding)",0===alertList.length)container.innerHTML='<webui-alert variant="info" show>You have no alerts at this time.</webui-alert>';else{let index=0;for(;index<alertList.length;){let alert=alertList[index];alert.userclosed?alertList.splice(index,1):(alert.setAttribute("show",!0),index++,container.appendChild(alert))}}return container}function showAlertsInDialog(){webui.dialog({title:getAlertHeader(),content:getAlertContent(),confirm:"Close"})}function showAlertsInDrawer(drawer){let el=document.querySelector(drawer);if(el){if(el.classList.contains("open"))return el.classList.remove("open"),void setTimeout((()=>showAlertsInDrawer(drawer)),500);el.innerHTML="",el.appendChild(getAlertHeader()),el.appendChild(getAlertContent()),setTimeout((()=>{el.classList.add("open")}),100)}else showAlertsInDialog()}webui.define("webui-alerts",{preload:"icon alert dialogs",constructor:t=>{t.count=0,t.icon=t.template.querySelector("webui-icon"),window.webuiAlert||(webui.alert=(message,variant)=>{let alert=webui.create("webui-alert");message.nodeName?alert.appendChild(message):alert.innerHTML=message,alert.setAttribute("variant",variant||"danger"),alert.setAttribute("show",!0),alert.style.margin="0 10px 10px 0",alert.userclosed=!1,alertList.push(alert),t.setCount(t.count+1),popup.appendChild(alert),setTimeout((()=>{alert.parentNode===popup&&alert.removeAttribute("show")}),popupTiming)},window.webuiAlert=webui.alert),t.addEventListener("click",(_ev=>(t.drawer?showAlertsInDrawer(t.drawer):showAlertsInDialog(),!0))),setTimeout((()=>t.checkCounts()),1e3)},attr:["data-toggleclass","data-title"],attrChanged:(t,property,value)=>{switch(property){case"dataTitle":alertTitle=value;break;case"dataPopup":let timing=parseInt(value);timing&&(popupTiming=timing);break;case"dataToggleclass":t.drawer=value.split("|")[0]}},setCount:function(value){this.count=value,this.icon.setAttribute("count",0===value?"":value.toLocaleString()),0===this.count?this.icon.setAttribute("theme","info"):this.icon.setAttribute("theme","success")},checkCounts:function(){let newCount=0;alertList.map((a=>{a.userclosed||newCount++})),newCount!=this.count&&this.setCount(newCount),setTimeout((()=>this.checkCounts()),1e3)},shadowTemplate:'\n<webui-icon icon="bell|fill|shade:tri|theme:info"></webui-icon>\n<style type="text/css">\n:host {\ndisplay:inline-flex;\ncursor:pointer;\npadding:1px;\nalign-items:center;\njustify-content:center;\n}\n</style>\n'})}