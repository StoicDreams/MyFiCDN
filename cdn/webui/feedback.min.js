"use strict";{const e=document.createElement("template");e.setAttribute("shadowrootmode",!0),e.innerHTML='\n<style type="text/css">\n:host {\ndisplay:inline-flex;\ncursor:pointer;\npadding:1px;\nalign-items:center;\njustify-content:center;\n}\n</style>\n<webui-fa icon="comment" family="solid"></webui-fa>\n';const t='\n<webui-inputmessage autofocus></webui-inputmessage>\n<webui-alert id="alert"></webuialert>\n';class a extends HTMLElement{constructor(){super();const a=this.attachShadow({mode:"open"});let n=this.innerHTML;const s=this;s.template=e.content.cloneNode(!0),a.appendChild(s.template),s.addEventListener("click",async()=>{let e={title:"Give us your Feedback!",minWidth:"80%"},a=s.dataset.post;a?(e.onconfirm=((e,t)=>new Promise(n=>{let i=t.querySelector("#alert"),r=t.querySelector("webui-inputmessage");i.removeAttribute("show");let o=r.value,c="text/plain";if(s.dataset.jsonName){c="application/json";let e={};e[s.dataset.jsonName]=r.value,o=JSON.stringify(e)}else s.dataset.formName&&(c="multipart/form-data",e.append(s.dataset.formName,r.value),o=e);r.value?fetch(a,{method:"POST",mode:"cors",cache:"no-cache",body:o,headers:{"Content-Type":c}}).then(async e=>{let t=await e.text();e.status>=200&&e.status<300?(webuiAlert(t,"success"),n(!0)):(i.innerHTML=`${t}`,i.setAttribute("variant","danger"),i.setAttribute("show",!0),n(!1))}).catch(e=>{i.innerHTML=`${e}`,i.setAttribute("variant","danger"),i.setAttribute("show",!0),n(!1)}):(i.innerHTML="Please provide a message.",i.setAttribute("variant","info"),i.setAttribute("show",!0),n(!1))})),e.content=`${n}${t}`,e.confirm="Send Feedback",e.cancel="Cancel"):e.content='Attribute data-post="https://..." needs to be set.';try{await webuiDialog(e)}catch(e){if("canceled"===e)return;console.error("Unexpected error from feedback->webuiDialog()",e)}})}static get observedAttributes(){return["title","data-post"]}attributeChangedCallback(e,t,a){t!==a&&(null==a?delete this[e]:this[e]=a)}connectedCallback(){this.getAttribute("preload")||this.setAttribute("preload","dialogs inputmessage alert alerts"),this.setAttribute("data-subscribe","feedback"),this.setAttribute("data-set","click")}disconnectedCallback(){}}customElements.define("webui-feedback",a)}