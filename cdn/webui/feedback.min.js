"use strict";{const content='\n<webui-input-message name="message" theme="primary" tab label="Enter your feedback here!" autofocus></webui-input-message>\n<webui-alert id="alert"></webuialert>\n';webui.define("webui-feedback",{preload:"dialogs input-message alert alerts",constructor:t=>{let extraContent=t.innerHTML;t._icon=t.template.querySelector("webui-icon"),t.addEventListener("click",(async _=>{let options={title:"Give us your Feedback!",minWidth:"80%"},postUrl=t.dataset.post;postUrl?(options.onconfirm=(data,content)=>new Promise((resolve=>{let alert=content.querySelector("#alert"),input=content.querySelector("webui-input-message");alert.removeAttribute("show");let body=input.value.trim(),ct="text/plain";if(t.dataset.jsonName){ct="application/json";let o={};o[t.dataset.jsonName]=body,body=JSON.stringify(o)}else t.dataset.formName&&(ct="multipart/form-data",data.append(t.dataset.formName,body),body=data);body?fetch(postUrl,{method:"POST",credentials:"include",mode:"cors",cache:"no-cache",body:body,headers:{"Content-Type":ct}}).then((async result=>{let body=await result.text();result.status>=200&&result.status<300?(webuiAlert(body,"success"),resolve(!0)):(alert.innerHTML=`${body}`,alert.setAttribute("variant","danger"),alert.setAttribute("show",!0),resolve(!1))})).catch((err=>{alert.innerHTML=`${err}`,alert.setAttribute("variant","danger"),alert.setAttribute("show",!0),resolve(!1)})):(alert.innerHTML="Please provide a message.",alert.setAttribute("variant","info"),alert.setAttribute("show",!0),resolve(!1))})),options.content=`${extraContent}${content}`,options.confirm="Send Feedback",options.cancel="Cancel"):options.content='Attribute data-post="https://..." needs to be set.';try{await webui.dialog(options)}catch(ex){if("canceled"===ex)return;console.error("Unexpected error from feedback->webui.dialog()",ex)}}))},setTheme:function(value){this._icon.setAttribute("theme",value)},attr:["title","data-post","flags"],attrChanged:(t,property,value)=>{if("flags"===property)"string"==typeof value&&value.split(" ").forEach((flag=>{let fa=flag.split(":");t._icon.setAttribute(fa[0],fa[1]||"")}))},connected:t=>{t.addDataset("subscribe","feedback:click")},shadowTemplate:'\n<webui-icon icon="feedback" fill></webui-icon>\n<style type="text/css">\n:host {\ndisplay:inline-flex;\ncursor:pointer;\npadding:1px;\nalign-items:center;\njustify-content:center;\n}\n</style>\n'})}