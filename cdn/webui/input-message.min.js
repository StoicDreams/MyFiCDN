"use strict";{function handleKeyDown(ev){if("Tab"!==ev.key||!ev.shiftKey)return;if(!ev.target||"TEXTAREA"!==ev.target.nodeName)return;ev.preventDefault();let el=ev.target,text=el.value,postTab=text.slice(el.selectionEnd,text.length),cursorPos=el.selectionEnd;ev.target.value=text.slice(0,el.selectionStart)+"\t"+postTab,++cursorPos,el.selectionStart=cursorPos,el.selectionEnd=cursorPos}function UpdateAllDisplayedTextareaSizes(){let index=0;for(;index<talist.length;)talist[index].offsetParent?talist[index++].autosize():talist.shift()}const talist=[];window.addEventListener("resize",UpdateAllDisplayedTextareaSizes),webui.define("webui-input-message",{preload:"flex",constructor:t=>{t.internals=t.attachInternals(),t.autosize=()=>{var target;t._field.value!==t.value&&(t.value=t._field.value,t.internals.setFormValue(t.name,t.value)),"TEXTAREA"===(target=t._field).nodeName&&setTimeout((()=>{target.style.height="0px";let newHeight=target.scrollHeight;target.style.height=`${newHeight+30}px`}),1)},t._handleFormData=t.handleFormData.bind(t),talist.push(t),t._label=t.template.querySelector("label"),t._field=t.template.querySelector("textarea"),t._field.setAttribute("name","message"),t._field.addEventListener("keydown",handleKeyDown),t._field.addEventListener("keyup",t.autosize),t._field.addEventListener("change",t.autosize)},attr:["title","name","autofocus","value","label","placeholder"],attrChanged:(t,property,value)=>{switch(property){case"placeholder":t._field.setAttribute("placeholder",value);break;case"label":t._label.innerHTML=value;break;case"name":t._field.setAttribute("name",value);break;case"autofocus":t._field.setAttribute("autofocus",value);break;case"value":t._field.value=value}},connected:t=>{let id=webui.uuid();t._label.setAttribute("for",id),t._field.setAttribute("id",id)},handleFormData:function({formData:formData}){this.disabled||(formData[this.name]=this.value)},shadowTemplate:'\n<style type="text/css">\n:host {\ndisplay:block;\nposition:relative;\nmin-height:3em;\nbox-sizing:border-box;\nborder:var(--theme-border-width) solid var(--theme-color);\n}\ntextarea {\ndisplay:block;\nposition:relative;\nwidth:100%;\nmin-height:3em;\nbox-sizing:border-box;\npadding:var(--padding);\nfont:inherit;\nresize: none;\noutline: none;\nborder:none;\n}\nwebui-flex {\nborder: 1px solid var(--theme);\nbackground-color: var(--theme);\n}\nlabel {\ndisplay:block;\npadding:var(--padding);\nmargin:0;\nbackground-color:var(--theme-color);\ncolor:var(--theme-color-offset);\n}\nlabel:empty {\ndisplay:none;\n}\n</style>\n<webui-flex column gap="0">\n<label></label>\n<textarea spellcheck="true" autocomplete="off" autocorrect="off"></textarea>\n</webui-flex>\n'})}