"use strict";webui.define("webui-gallery",{preload:"flex cards card avatar",constructor:t=>{t.flexImage=webui.create("webui-flex"),t.flexName=webui.create("webui-flex"),t.cards=webui.create("webui-cards"),t.cache={}},attr:["src","card-width"],loadGallery:async function(t){if(!t.src)return;let result=await fetch(t.src);if(!result.ok)return;let images=await result.json();if(!images.length)return;t.parentNode.insertBefore(t.flexImage,t),t.parentNode.insertBefore(t.flexName,t),t.parentNode.insertBefore(t.cards,t),t.currentImage=images[0],t.flexImage.setAttribute("justify","center"),t.flexImage.setAttribute("align","center"),t.flexImage.setAttribute("column","true"),t.flexImage.classList.add("pa-2"),t.flexImage.style.height="calc(0.8 * var(--main-height))";let img=webui.create("img");img.setAttribute("data-subscribe","page-gallery-image"),img.setAttribute("data-set","src"),t.flexImage.appendChild(img),t.flexName.setAttribute("justify","center"),t.flexName.classList.add("pa-1","ma-1");let nm=webui.create("p");t.flexName.appendChild(nm),nm.setAttribute("data-subscribe","page-gallery-image-name"),nm.setAttribute("data-set","innerHTML"),t.cards.classList.add("mb-5"),t.cardWidth&&t.cards.setAttribute("card-width",t.cardWidth);let cardTemplate=webui.create("webui-card");images.forEach((image=>{let card=cardTemplate.cloneNode(!1);t.cards.appendChild(card),card.setAttribute("title",image.name);let wrap=webui.create("div");wrap.style.overflow="hidden",wrap.style.maxWidth="100%",card.appendChild(wrap);let ca=webui.create("webui-avatar");wrap.appendChild(ca),card.style.cursor="pointer",ca.setAttribute("src",image.src),ca.style.fontSize="4em",card.addEventListener("click",(_ev=>{webui.setData("page-gallery-image",image.src),webui.setData("page-gallery-image-name",image.name)}))})),webui.setData("page-gallery-image",t.currentImage.src),webui.setData("page-gallery-image-name",t.currentImage.name)},connected:t=>{t.loadGallery(t)}});