/*!
 * Web UI App - https://webui.stoicdreams.com/components#webui-app
 * Main layout component.
 * Authored by Erik Gassler - Stoic Dreams
 * Copyright Â© 2024-2025 Stoic Dreams - https://www.stoicdreams.com
 * Licensed under the MIT license - https://github.com/StoicDreams/MyFiCDN/blob/main/LICENSE
 */
"use strict";webui.define("webui-app",{constructor:t=>{webui.setApp(t),t.dynstyles=webui.create("style"),t.dynstyles.setAttribute("type","text/css"),t.headerSlot=t.template.querySelector("slot[name=header]"),t.contentFooterSlot=t.template.querySelector('slot[name="content-footer"]'),t.footerSlot=t.template.querySelector("slot[name=footer]"),t.leftPanelSlot=t.template.querySelector("slot[name=left]"),t.rightPanelSlot=t.template.querySelector("slot[name=right]"),t.topPanelSlot=t.template.querySelector("slot[name=top]"),t.bottomPanelSlot=t.template.querySelector("slot[name=bottom]"),t.main=t.template.querySelector("main"),t.mainSlot=t.template.querySelector("main>slot"),document.head.appendChild(t.dynstyles),t.getAttribute("preload")||t.setAttribute("preload","dialogs"),webui.applyDynamicStyles=()=>{t.applyDynamicStyles()}},attr:["page-content","page-data","page-content-encrypt","page-data-encrypt","root-page","content-extension"],setPageContent:function(content){this.mainSlot.assignedElements().forEach((node=>{node.remove()}));let temp=webui.create("div");temp.innerHTML=content,this.append(...temp.childNodes)},attrChanged:(t,property,newValue)=>{switch(property){case"rootPage":webui._appSettings.rootPage=newValue;break;case"contentExtension":webui._appSettings.contentExtension=newValue;break;case"pageContent":appSettings.pageContentEndpoint=newValue;break;case"pageData":webui._appSettings.pageDataEndpoint=newValue;break;case"pageDataEncrypt":webui._appSettings.encryptPageData=newValue;break;case"pageContentEncrypt":webui._appSettings.encryptPageContent=newValue}},setBodyClasses:()=>{let winWidth=window.innerWidth,w=winWidth>3800?"w-4k":winWidth>3400?"w-wqhd":winWidth>2500?"w-qhd":winWidth>1900?"w-fhd":winWidth>1500?"w-hdp":winWidth>1300?"w-hd":winWidth>500?"w-tab":"w-mob",hasClass=!1;document.body.classList.forEach((cl=>{cl.startsWith("w-")&&cl!==w?document.body.classList.remove(cl):cl===w&&(hasClass=!0)})),hasClass||document.body.classList.add(`${w}`)},applyDynamicStyles:function(){this.setBodyClasses();let h=this.getSlot("header")||{clientHeight:0},f=this.getSlot("footer")||{clientHeight:0},t=this.getSlot("top")||{clientHeight:0},r=this.getSlot("right")||{clientWidth:0},b=this.getSlot("bottom")||{clientHeight:0},l=this.getSlot("left")||{clientWidth:0},m=this.shadowRoot.querySelector("main"),w=window,wb=document.body,ww=w.innerWidth||wb.clientWidth,wh=w.innerHeight||wb.clientHeight,value=`\n:root {\n--window-width: ${ww}px;\n--window-height: ${wh}px;\n--main-width: ${m.clientWidth}px;\n--main-height: ${wh-(h.clientHeight+f.clientHeight+t.clientHeight+b.clientHeight)}px;\n--header-height: ${h.clientHeight}px;\n--footer-height: ${f.clientHeight}px;\n--drawer-left-width: ${l.clientWidth}px;\n--drawer-right-width: ${r.clientWidth}px;\n--drawer-top-height: ${t.clientHeight}px;\n--drawer-bottom-height: ${b.clientHeight}px;\n}\n`;this._adsrCache!==value&&(this._adsrCache=value,this.dynstyles.innerHTML=value)},_adsrCache:{},shadowTemplate:'\n<slot name="header"></slot>\n<main><slot></slot><slot name="content-footer"></slot></main>\n<slot name="footer"></slot>\n<slot name="left"></slot>\n<slot name="right"></slot>\n<slot name="top"></slot>\n<slot name="bottom"></slot>\n<webui-dialogs></webui-dialogs>\n<style type="text/css">\n:host {\nbackground-color: var(--color-background, white);\ncolor: var(--color-background-offset, black);\ndisplay: grid;\ngrid-template-columns: min-content auto min-content;\ngrid-template-rows: min-content min-content auto min-content min-content;\nposition: fixed;\nleft: 0;\ntop: 0;\nwidth: 100%;\nheight: 100%;\nmax-width: 100%;\nmax-height: 100%;\noverflow: hidden;\n}\n::slotted([slot="header"]) {\ngrid-row: 2;\ngrid-column: 2;\ndisplay: flex!important;\nalign-items: start;\njustify-items: start;\nfont-size: 1.2rem;\ngap:var(--padding, 1em);\npadding:var(--padding,1em);\nheight:min-content;\nmax-height:min-content;\n}\n::slotted([slot="footer"]) {\ngrid-row: 4;\ngrid-column: 2;\ndisplay: flex!important;\nfont-size: 0.8rem;\nalign-items:center;\npadding:var(--padding, 1em);\nvertical-align:middle;\ngap:var(--padding, 1em);\nheight:min-content;\nmax-height:min-content;\n}\n::slotted([slot="left"]) {\ngrid-column: 1;\nz-index: 10;\nmax-height: var(--window-height);\noverflow:auto;\n}\n::slotted([slot="right"]) {\ngrid-column: 3;\nz-index: 11;\nmax-height: var(--window-height);\noverflow:auto;\n}\n::slotted([slot="bottom"]) {\nheight:min-content;\ngrid-row: 5;\nz-index: 12;\nmax-width: var(--window-width);\n}\n::slotted([slot="top"]) {\nheight:min-content;\ngrid-row: 1;\nz-index: 13;\nmax-width: var(--window-width);\n}\n::slotted([slot="left"]),\n::slotted([slot="right"]) {\nmax-width: calc(0.66 * var(--window-width));\ngrid-row: 2/5;\ndisplay: flex!important;\nflex-direction: column;\n}\n::slotted([slot="top"]),\n::slotted([slot="bottom"]) {\nmax-height: calc(0.5 * var(--window-height));\ngrid-column: 2;\n}\n::slotted(:not([slot])) {\n}\nslot[name="content-footer"] {\ndisplay:grid;\ngap:var(--padding);\nmargin-top:calc(5*var(--padding));\npadding:var(--padding);\n}\nmain {\ndisplay:block;\noverflow:auto;\nbox-sizing:border-box;\nheight:var(--main-height);\npadding:var(--padding,1em);\ngrid-row: 3;\ngrid-column: 2;\ntransition:opacity 0.4s ease-out,\ntransform 0.4s ease-out;\n}\nmain.transition {\ntransform:rotateY(90deg);\nopacity:0;\n}\n::-webkit-scrollbar {\nwidth: 1em;\nheight: 1em;\n}\n::-webkit-scrollbar-thumb {\nbackground: rgba(90, 90, 90, 0.2);\n}\n::-webkit-scrollbar-track {\nbackground: rgba(0, 0, 0, 0.2);\n}\n</style>\n'});