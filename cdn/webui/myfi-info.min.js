"use strict";{const domain=location.hostname,flowGrow="\n<webui-flex grow></webui-flex>",signoutContent='\n<webui-button name="signout" theme="danger">Sign-Out</webui-button>';function isLocalHost(){return"localhost"===domain||"NaN"!==parseInt(domain).toString()}webui.define("webui-myfi-info",{constructor:t=>{t._icon=t.template.querySelector("webui-icon"),t._slotContent=t.template.querySelector('slot[name="panel-content"]'),t.addEventListener("click",(async ev=>{if(ev.stopPropagation(),ev.preventDefault(),webui.isSignedIn){let template=t._slotContent.assignedElements()[0],content=template?template.innerHTML:'<webui-alert variant="info" show>Coming Soon!</webui-alert>',excludes=(t.exclude||"").split("|").map((e=>e.trim()));-1===excludes.indexOf("grow")&&(content=`${content}${flowGrow}`),-1===excludes.indexOf("signout")&&(content=`${content}${signoutContent}`);let title=t.getAttribute("header")||"Account Panel";if(content=await webui.openSharedDrawer(title,content),-1===excludes.indexOf("signout")){content.querySelector('[name="signout"]').addEventListener("click",(async _=>{isLocalHost()?webui.setData("session-user-role",0):(await webui.fetchApi("user/signout"),await webui.loadRoles()),webui.closeSharedDrawer(),webui.alert("You have been signed out.","success")}))}}else isLocalHost()?(webui.setData("session-user-role",1),webui.alert("Simulated sign-in for LocalHost testing.","success")):location.href=`https://www.stoicdreams.com/signin?domain=${domain}`}))},attr:["exclude"],connected:function(t){t.setupComponent()},setupComponent:function(){this.addDataset("subscribe","session-user-role:render"),this.render()},render:function(){const t=this;if(t._lastRender==webui.isSignedIn)return;let isSignedIn=webui.isSignedIn;t._lastRender=isSignedIn,isSignedIn?(t._icon.setAttribute("icon","account"),t._icon.setAttribute("theme","success"),t.setAttribute("title","Toggle Account Panel")):(t._icon.setAttribute("icon","signin"),t._icon.setAttribute("theme","warning"),t.setAttribute("title","Sign-In through Stoic Dreams account"))},shadowTemplate:'\n<webui-icon icon="signin" fill></webui-icon>\n<slot name="panel-content"></slot>\n<style type="text/css">\n:host {\ndisplay:inline-flex;\ncursor:pointer;\npadding:1px;\nalign-items:center;\njustify-content:center;\n}\n</style>\n'})}