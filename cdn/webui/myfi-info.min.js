"use strict";{const domain=location.hostname,flowGrow="\n<webui-flex grow></webui-flex>",panelBottomButtons=[{name:"site-settings",theme:"info",display:"Site Settings",click:_=>{webui.closeSharedDrawer(),webui.dialog({title:"Site Settings",minWidth:"80%",content:"<webui-site-settings></webui-site-settings>",cancel:null,confirm:"Close"})}},{name:"signout",theme:"danger",display:"Sign-Out",click:async _=>{webui.closeSharedDrawer(),webui.isLocalhost?webui.setData("session-user-role",0):(await webui.fetchApi("user/signout"),await webui.loadRoles()),webui.alert("You have been signed out.","success")}}];webui.isLocalhost&&panelBottomButtons.push({name:"dev",theme:"warning",display:"Dev Settings",click:_=>{webui.closeSharedDrawer(),webui.dialog({title:"Developer Settings",minWidth:"80%",content:"<webui-myfi-dev-settings></webui-myfi-dev-settings>",cancel:null,confirm:"Close"})}}),webui.define("webui-myfi-info",{constructor:t=>{t._icon=t.template.querySelector("webui-icon"),t._slotContent=t.template.querySelector('slot[name="panel-content"]'),t.addEventListener("click",(async ev=>{if(ev.stopPropagation(),ev.preventDefault(),webui.isSignedIn){let template=t._slotContent.assignedElements()[0],content=template?template.innerHTML:'<webui-alert variant="info" show>Coming Soon!</webui-alert>',excludes=(t.exclude||"").split("|").map((e=>e.trim()));-1===excludes.indexOf("grow")&&(content=`${content}${flowGrow}`);let title=t.getAttribute("header")||"Account Panel";content=await webui.openSharedDrawer(title,content),panelBottomButtons.map((cfg=>{if(console.log(cfg),-1===excludes.indexOf(cfg.name)){var btn=webui.create("webui-button",{theme:cfg.theme,name:cfg.name,html:cfg.display});btn.addEventListener("click",cfg.click),content.appendChild(btn)}}))}else webui.isLocalhost?(webui.setData("session-user-role",1),webui.alert("Simulated sign-in for LocalHost testing.","success")):location.href=`https://www.stoicdreams.com/signin?domain=${domain}`}))},attr:["exclude"],connected:function(t){t.setupComponent()},setupComponent:function(){this.addDataset("subscribe","session-user-role:render"),this.render()},render:function(){const t=this;if(t._lastRender==webui.isSignedIn)return;let isSignedIn=webui.isSignedIn;t._lastRender=isSignedIn,isSignedIn?(t._icon.setAttribute("icon","person|has-shadow:true|fill|bordered|shade:tri|shape:circle|backing|rotate:0"),t._icon.setAttribute("theme","success"),t.setAttribute("title","Toggle Account Panel")):(t._icon.setAttribute("icon","arrow-side-into-square|has-shadow:true|rotate:180"),t._icon.setAttribute("theme","warning"),webui.isLocalhost?t.setAttribute("title","Simulate Sign-In for Dev Testing"):t.setAttribute("title","Sign-In through Stoic Dreams account"))},shadowTemplate:'\n<webui-icon icon="arrow-side-into-square|has-shadow:true|rotate:180" fill></webui-icon>\n<slot name="panel-content"></slot>\n<style type="text/css">\n:host {\ndisplay:inline-flex;\ncursor:pointer;\npadding:1px;\nalign-items:center;\njustify-content:center;\n}\n</style>\n'})}