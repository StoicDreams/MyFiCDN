/*!
 * Web UI Dialogs - https://webui.stoicdreams.com/components#webui-dialogs
 * A component for displaying and managing dialogs within the web UI.
 * Authored by Erik Gassler - Stoic Dreams
 * Copyright Â© 2024-2025 Stoic Dreams - https://www.stoicdreams.com
 * Licensed under the MIT license - https://github.com/StoicDreams/MyFiCDN/blob/main/LICENSE
 */
"use strict";const webuiDialog=function(data){return webuiDialog._handler(data)};{const defaultDialogOptions={content:"Missing Content",confirm:"Ok"},defaultWaitOptions={hideclose:!0,ignoreBackdropClick:!0,content:"Loading, please wait!"};webui.dialog=webuiDialog,webui.define("webui-dialogs",{preload:"icon",linkCss:!0,constructor:t=>{t.dialog=t.template.querySelector("dialog"),t.form=t.template.querySelector("form"),t.header=t.template.querySelector("form>header>section"),t.content=t.template.querySelector("form>section"),t.footer=t.template.querySelector("form>footer"),t.btnClose=t.template.querySelector("#dlg-close"),t.btnConfirm=t.template.querySelector("#dlg-confirm"),t.btnCancel=t.template.querySelector("#dlg-cancel");let close=()=>{};function setContent(el,content){(content=content||"").nodeType?el.appendChild(content):el.innerHTML=content}function replaceNode(node){let c=node.cloneNode();return node.parentNode.insertBefore(c,node),node.remove(),c}t.form.addEventListener("submit",(ev=>{console.log("submit",ev),t._onsubmit()})),document.body.addEventListener("keyup",(ev=>{"Escape"===ev.key&&close(!0)})),t.dialog.addEventListener("click",(ev=>{if(t._ignoreBackdropClick)return;const rect=t.dialog.getBoundingClientRect();rect.top<=ev.clientY&&ev.clientY<=rect.top+rect.height&&rect.left<=ev.clientX&&ev.clientX<=rect.left+rect.width||close(!0)})),webuiDialog._handler||(webuiDialog._handler=function(data){let promise=new Promise(((resolve,reject)=>{t.header=replaceNode(t.header),t.content=replaceNode(t.content),t.btnCancel=replaceNode(t.btnCancel),t.btnConfirm=replaceNode(t.btnConfirm);let defaultSet=(data=data||defaultDialogOptions).isLoading?defaultWaitOptions:defaultDialogOptions;data.isLoading&&(data={...defaultWaitOptions,...data}),t._onsubmit=async function(){let result,formData=new FormData(t.form);data.onconfirm&&(result=data.onconfirm.constructor&&"AsyncFunction"===data.onconfirm.constructor.name?await data.onconfirm(formData,t.content):data.onconfirm(formData,t.content),result&&result.then&&(result=await result),!result)||(null==result||!!result)&&(resolve(formData,t.content),close(!1))},t._ignoreBackdropClick=!!data.ignoreBackdropClick,t.dialog.style.minWidth=data.minWidth||"",setContent(t.content,data.content||defaultSet.content),setContent(t.btnCancel,data.cancel||defaultSet.cancel),setContent(t.btnConfirm,data.confirm||defaultSet.confirm),setContent(t.header,data.title||""),data.isLoading?t.dialog.classList.add("isloading"):data.hideclose?(t.dialog.classList.remove("isloading"),t.dialog.setAttribute("data-hideclose",!0)):(t.dialog.classList.remove("isloading"),t.dialog.removeAttribute("data-hideclose")),close=canceled=>{data.onclose&&data.onclose(),canceled&&reject("canceled"),t.dialog.close(),close=()=>{}},t.btnClose.addEventListener("click",(()=>close(!0))),t.btnCancel.addEventListener("click",(()=>close(!0))),t.btnConfirm.addEventListener("click",(ev=>{ev.preventDefault(),t._onsubmit()})),t.dialog.showModal()}));return promise.close=()=>{close()},promise})},shadowTemplate:'\n<dialog>\n<form method="dialog">\n<header>\n<section></section>\n<button id="dlg-close" value="cancel" type="button" formmethod="dialog"><webui-icon icon="xmark"></webui-icon></button>\n</header>\n<section></section>\n<footer>\n<button id="dlg-cancel" value="cancel" type="button" formmethod="dialog" formnovalidate></button>\n<span></span>\n<button id="dlg-confirm" value="confirm" type="submit" formmethod="dialog"></button>\n</footer>\n</form>\n</dialog>\n<style type="text/css">\n:host {\nbackground-color:inherit;\ncolor:inherit;\n}\ndialog {\ndisplay:none;\nopacity:0;\npadding:0;\ntransform:scaleY(0) scaleX(0) scaleZ(0.8) translateX(-500px) translateY(500px);\nborder-radius:var(--corners, 0);\nborder:none;\nmax-width:80%;\nmax-height:80%;\nflex-direction:column;\ntransition:\nopacity 0.4s ease-out,\ntransform 0.4s ease-out,\noverlay 0.4s ease-out allow-discrete,\ndisplay 0.4s ease-out allow-discrete;\nbackground-color:inherit;\ncolor:inherit;\n}\ndialog[open] {\ndisplay:flex;\nopacity:1;\ntransform:scaleY(1) scaleX(1) scaleZ(1) translateX(0) translateY(0px);\n}\nform>header,\nform>section,\nform>footer {\ndisplay:flex;\ngap: var(--padding, 1em);\npadding:var(--padding, 1em);\n}\nform>header,\nform>footer {\nflex-direction:row;\n}\nform>section {\nflex-direction:column;\noverflow:auto;\nmax-height:calc(var(--window-height) * 0.8 - 10em);\n}\nheader>section,\nfooter>span {\nflex-grow:1;\n}\nform>header{\nbackground-color:var(--color-title);\ncolor:var(--color-title-offset);\n}\nform>footer {\nbackground-color:var(--color-footer);\ncolor:var(--color-footer-offset);\n}\ndialog::backdrop {\nbackground-color: rgb(0 0 0 / 0%);\nbackdrop-filter:blur(0);\ntransition:\ndisplay 0.4s allow-discrete,\noverlay 0.4s allow-discrete,\nbackground-color 0.4s;\n}\ndialog[open]::backdrop {\nbackground-color: rgb(0 0 0 / 50%);\nbackdrop-filter:var(--backdrop-blur, blur(5px));\n}\n@starting-style {\ndialog[open] {\nopacity:0;\ntransform:scaleY(0) scaleX(0) scaleZ(0.8) translateX(500px) translateY(-500px);\n}\ndialog[open]::backdrop {\nbackground-color: rgb(0 0 0 / 0%);\nbackdrop-filter:blur(0);\n}\n}\nbutton {\ndisplay:inline-flex;\ncursor:pointer;\npadding:var(--button-padding, 0.5em 1em);\nalign-items:center;\njustify-content:center;\nborder:none;\nbackground:none;\ncolor:inherit;\nborder-radius:var(--corners);\n}\nbutton:empty {display:none;}\ndialog.isloading header,\ndialog.isloading footer,\ndialog[data-hideclose] button#dlg-close {\ndisplay:none;\n}\nbutton#dlg-cancel {\nbackground-color:var(--color-warning, #666);\ncolor:var(--color-warning-offset, #CCC);\n}\nbutton#dlg-confirm {\nbackground-color:var(--color-success, #555);\ncolor:var(--color-success-offset, #FFF);\n}\n</style>\n'})}