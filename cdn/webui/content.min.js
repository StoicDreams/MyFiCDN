"use strict";webui.define("webui-content",{watchVisibility:!0,constructor:t=>{t.loadDelay=300},linkCss:!0,attr:["src","preload","load-delay","height","width"],flags:["cache"],attrChanged:(t,property,value)=>{switch(property){case"height":t.style.height=webui.pxIfNumber(value);break;case"width":t.style.width=webui.pxIfNumber(value);break;case"loadDelay":t.loadDelay=parseInt(value)||0;break;case"visible":t.updateContent();break;case"src":t.setSrc(value)}},connected:t=>{t.innerHTML&&(t.src||(t.src="html"),t._contentLoaded="html",t.classList.remove("loading"),t.classList.add("loaded")),setTimeout((()=>t.updateContent()),10)},updateContent:function(){let t=this;t.preload?t.fetchContent():t.visible&&setTimeout((()=>t.fetchContent()),t.loadDelay)},setHtml:function(html){let t=this;t.src="html",t._contentLoaded="html",t.classList.remove("loading"),t.classList.add("loaded"),t.innerHTML=html},setSrc:function(value){let t=this;t.src=value,t._contentLoaded=!1,t.fetchContent()},fetchContent:async function(){let t=this;if((t.preload||t.visible)&&(!t._contentLoaded||t._contentLoaded!==t.src)&&t.src){t.classList.add("loading"),t._contentLoaded=t.src;try{let content=null;if(t.cache?content=await webui.fetchWithCache(t.src):(content=await fetch(t.src),content=content.ok?await content.text():null),!content)return void(t.innerHTML=`Failed to load content from ${t.src}`);let body=content;if(body.startsWith("<!DOCTYPE"))return void(t.innerHTML=`Source ${t.src} did not return expected markdown/html snippet (Full HTML documents are not allowed by t component)`);if(t.hasAttribute("slot")||t.hasAttribute("nest"))t.innerHTML=webui.applyAppDataToContent(body);else{let temp=webui.create("div");temp.innerHTML=webui.applyAppDataToContent(body);let n=[],p=t.parentNode,b=t;temp.childNodes.forEach((node=>{n.push(node)})),n.forEach((node=>{p.insertBefore(node,b)})),t.parentNode!==p&&b.remove(),t.remove()}}catch(ex){t.innerHTML=`Source ${t.src} failed to load:${ex}`}finally{t.classList.remove("loading"),t.classList.add("loaded")}}},shadowTemplate:'\n<slot></slot>\n<style type="text/css">\n:host {\n--scroll-color: color-mix(in srgb, var(--theme-color) 20%, transparent);\n--scroll-shadow: -4px 0 -4px rgba(255, 255, 255, 0.2) inset;\n}\n:host(:not(.loaded)) slot,\n:host(:not([visible])) slot {\ndisplay:none;\n}\nslot {\ndisplay:block;\nmin-width:100%;\nmin-height:100%;\noverflow:auto;\n}\n::-webkit-scrollbar,\n*::-webkit-scrollbar {\nbackground-color: var(--scroll-color);\nbox-shadow: var(--scroll-shadow);\n}\n:host(:not(.loaded)) {\ndisplay:flex;\nflex-direction:column;\ngap: var(--padding);\nalign-items: center;\njustify-content: center;\n}\n:host(:not(.loaded)):before {\ncontent: " ";\nanimation: spin 1s infinite linear;\nborder: 2px solid rgba(30, 30, 30, 0.5);\nborder-left: 4px solid #fff;\nborder-radius: 50%;\nheight: 50px;\nmargin-bottom: 10px;\nwidth: 50px;\n}\n:host(:not(.loaded).loading):after {\ncontent: \'Loading\';\nanimation: load 2s linear infinite;\n}\n:host([visible].loaded) {\nanimation: animation-fadein 300ms ease-in;\n}\n</style>\n'});