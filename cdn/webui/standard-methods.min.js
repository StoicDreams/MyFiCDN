"use strict";{function parseWebUIMethods(source){const body=extractClassBody(source,"WebUI");if(!body)return[];const methods=[],jsdocRegex=/\/\*\*[\s\S]*?\*\//g,lineStarts=[0];for(let i=0;i<body.length;i++)"\n"===body[i]&&lineStarts.push(i+1);const idxToLine=idx=>{let lo=0,hi=lineStarts.length-1;for(;lo<=hi;){const mid=lo+hi>>1;lineStarts[mid]<=idx?lo=mid+1:hi=mid-1}return hi+1};let i=0,depth=0;for(;i<body.length;){const ch=body[i];if('"'!==ch&&"'"!==ch)if("`"!==ch)if("/"!==ch||"/"!==body[i+1])if("/"!==ch||"*"!==body[i+1])if("{"!==ch)if("}"!==ch){if(0===depth){let m=matchHere(body,i,/^\s*(?:\/\*\*[\s\S]*?\*\/\s*)?(get|set)\s+([A-Za-z_$][\w$]*)\s*\(([^)]*)\)\s*\{/);if(m||(m=matchHere(body,i,/^\s*(?:\/\*\*[\s\S]*?\*\/\s*)?(?:async\s+)?([A-Za-z_$][\w$]*)\s*\(([^)]*)\)\s*\{/)),m){const[full,g1,g2,g3]=m,start=i+m.index,line=idxToLine(start);let kind,name,paramsRaw,jsdoc=null;{const lookback=body.slice(Math.max(0,start-4e3),start);let jm,last=null;for(jsdocRegex.lastIndex=0;jm=jsdocRegex.exec(lookback);)last=jm;if(last){const tail=lookback.slice(last.index+last[0].length);/^\s*$/.test(tail)&&(jsdoc=last[0])}}if("get"===g1||"set"===g1)kind=g1,name=g2,paramsRaw=g3;else{const asyncMatch=full.match(/^\s*(?:\/\*\*[\s\S]*?\*\/\s*)?(async\s+)?/);kind=!(!asyncMatch||!asyncMatch[1])?"async":"method",name=g1,paramsRaw=g2}if("constructor"!==name&&!name.startsWith("#")){const params=splitParams(paramsRaw);methods.push({name:name,kind:kind,async:"async"===kind,params:params,jsdoc:parseJSDoc(jsdoc),signature:`${"async"===kind?"async ":"get"===kind||"set"===kind?kind+" ":""}${name}(${paramsRaw})`,line:line})}i=start+full.length;continue}}i++}else depth=Math.max(0,depth-1),i++;else depth++,i++;else i=skipBlockComment(body,i);else i=skipLineComment(body,i);else i=skipTemplate(body,i);else i=skipString(body,i,ch)}return methods.sort(((a,b)=>a.line-b.line)),methods}function splitParams(raw){return(raw=raw.trim())?raw.split(",").map((s=>s.trim())).filter(Boolean).map((p=>{const eq=p.indexOf("=");return-1!==eq?{name:p.slice(0,eq).trim(),default:p.slice(eq+1).trim(),raw:p}:{name:p,default:void 0,raw:p}})):[]}function parseJSDoc(block){if(!block)return null;const out={description:"",params:[],returns:null,examples:[],throws:[]},lines=block.replace(/^\/\*\*|\*\/$/g,"").split("\n").map((l=>l.replace(/^\s*\*\s?/,"")));let inDesc=!0,buf=[];const tagR=/^@(\w+)\s*(.*)$/;for(const raw of lines){const line=raw.trim(),m=line.match(tagR);if(!m){buf.push(line);continue}inDesc&&buf.length&&(out.description=buf.join("\n").trim(),buf=[],inDesc=!1);const[,tag,restRaw]=m,rest=restRaw.trim(),typeM=rest.match(/^\{([^}]+)\}\s*(.*)$/);let type=null,tail=rest;switch(typeM&&(type=typeM[1].trim(),tail=typeM[2].trim()),tag){case"param":{let name=tail,desc="";const split=tail.split(/\s+-\s+|\s+â€”\s+/);let def;split.length>1&&(name=split.shift(),desc=split.join(" - "));const defM=name.match(/^(\[?[\w.$[\]]+\]?)(?:\s*=\s*(.+))?$/);defM&&(name=defM[1],void 0!==defM[2]&&(def=defM[2])),out.params.push({name:name,type:type,description:desc||"",default:def});break}case"returns":case"return":{let desc=tail;null!==type&&(desc=tail.replace(/^\{[^}]+\}\s*/,"")),out.returns={type:type,description:desc.trim()};break}case"example":out.examples.push(tail);break;case"throws":{let desc=tail;null!==type&&(desc=tail.replace(/^\{[^}]+\}\s*/,"")),out.throws.push({type:type,description:desc.trim()});break}default:(out.other||=[]).push({tag:tag,raw:rest})}}return inDesc&&buf.length&&(out.description=buf.join("\n").trim()),out}function matchHere(str,idx,re){const m=str.slice(idx).match(re);return m?(m.index=m.index??0,m):null}function extractClassBody(src,className){console.log("extract",src,className);let i=0;for(;i<src.length;){const c=src[i];if('"'!==c&&"'"!==c)if("`"!==c)if("/"!==c||"/"!==src[i+1])if("/"!==c||"*"!==src[i+1]){if(src.startsWith("class",i)&&!/\w/.test(src[i-1]||"")){let j=i+5;for(;/\s/.test(src[j]);)j++;if(src.startsWith(className,j)){let k=j+className.length;for(;k<src.length&&"{"!==src[k];){const ch=src[k];'"'!==ch&&"'"!==ch?"`"!==ch?"/"!==ch||"/"!==src[k+1]?"/"!==ch||"*"!==src[k+1]?k++:k=skipBlockComment(src,k):k=skipLineComment(src,k):k=skipTemplate(src,k):k=skipString(src,k,ch)}if(k>=src.length)return null;let depth=1,start=++k;for(;k<src.length&&depth>0;){const ch2=src[k];'"'!==ch2&&"'"!==ch2?"`"!==ch2?"/"!==ch2||"/"!==src[k+1]?"/"!==ch2||"*"!==src[k+1]?("{"===ch2?depth++:"}"===ch2&&depth--,k++):k=skipBlockComment(src,k):k=skipLineComment(src,k):k=skipTemplate(src,k):k=skipString(src,k,ch2)}return 0!==depth?null:src.slice(start,k-1)}}i++}else i=skipBlockComment(src,i);else i=skipLineComment(src,i);else i=skipTemplate(src,i);else i=skipString(src,i,c)}return null}function skipString(str,i,quote){for(i++;i<str.length;)if("\\"!==str[i]){if(str[i]===quote)return i+1;i++}else i+=2;return i}function skipLineComment(str,i){for(i+=2;i<str.length&&"\n"!==str[i];)i++;return i}function skipBlockComment(str,i){for(i+=2;i+1<str.length&&("*"!==str[i]||"/"!==str[i+1]);)i++;return i+2}function skipTemplate(str,i){for(i++;i<str.length;)if("\\"!==str[i]){if("`"===str[i])return i+1;if("$"!==str[i]||"{"!==str[i+1])i++;else{i+=2;let depth=1;for(;i<str.length&&depth>0;){const ch=str[i];"\\"!==ch?'"'!==ch&&"'"!==ch?"`"!==ch?"/"!==ch||"/"!==str[i+1]?"/"!==ch||"*"!==str[i+1]?("{"===ch?depth++:"}"===ch&&depth--,i++):i=skipBlockComment(str,i):i=skipLineComment(str,i):i=skipTemplate(str,i):i=skipString(str,i,ch):i+=2}}}else i+=2;return i}const srcRoot="3180"===location.port?"":"https://cdn.myfi.ws";webui.define("webui-standard-methods",{content:!0,watchVisibility:!1,isInput:!1,preload:"tabs content alert button",constructor:t=>{},flags:[],attr:["height","max-height"],attrChanged:(t,property,value)=>{switch(property){case"height":t.style.height=webui.pxIfNumber(value);break;case"maxHeight":t.style.maxHeight=webui.pxIfNumber(value)}},connected:function(t){t.setupComponent()},disconnected:function(t){},reconnected:function(t){},setupComponent:function(){this.innerHTML="";let alert=webui.create("webui-alert");this.appendChild(alert),alert.setValue({text:"Loading Web UI Methods"},"info"),webui.fetchWithCache(`${srcRoot}/webui/loader.js`).then((data=>{console.log(extractClassBody(data,"WebUI")),console.log(!!extractClassBody(data,"WebUI")),data=parseWebUIMethods(data),console.log(data)})).catch((ex=>{alert.setValue({text:`Failed to load method data:${ex}`},"danger")}))}})}