/*!
 * Web UI MyFi Storage Consent - https://webui.stoicdreams.com/components#myfi-storage-consent
 * A component for managing user storage consent within the web UI.
 * Authored by Erik Gassler - Stoic Dreams
 * Copyright Â© 2024-2025 Stoic Dreams - https://www.stoicdreams.com
 * Licensed under the MIT license - https://github.com/StoicDreams/MyFiCDN/blob/main/LICENSE
 */
"use strict";{let isDesktopApp=webui._appSettings.isDesktopApp,appType=webui._appSettings.appType||"website",hostType=isDesktopApp?"app":"browser";function build_options(){let btnSesTheme="warning",btnLocTheme="warning";if("2"===(isDesktopApp?"2":webui.storage.getItem(webui.storage.STORAGE_ACCEPTED_KEY)||"1"))btnLocTheme="active";else btnSesTheme="active";let options=[{name:"Long-term Storage (Lowest Security)",theme:btnLocTheme,body:`\n<webui-paper class="pa-1">\n    With this storage option, you only need to consent and login once. Your login will persist even after closing and reopening this ${appType}.\n</webui-paper>\n\n###### Use this option when:\n\n<webui-paper class="pa-1">\n- You are on your personal device.\n- Your device is secure from other people accessing it.\n- You want to remain logged in until you explicitely logout.\n</webui-paper>\n<webui-flex grow></webui-flex>\n<webui-button wrap theme="${btnLocTheme}" data-trigger="${webui.storage.STORAGE_ACCEPTED_KEY}" data-value="${webui.storage.ACCEPT_LOCAL_STORAGE}">\nI confirm that I am using my personal device and that I understand the above statements and I accept the use of storing my data in the ${hostType} so my login and other data will be remembered any time I access this ${appType}.\n</webui-button>\n`}];isDesktopApp||options.splice(0,0,{name:"Single Session/Tab Storage (Best Security)",theme:btnSesTheme,body:`\n<webui-paper class="pa-1">\nWith this storage option, browser data is only stored until you either close your tab or browser. Opening a new tab will start a new session.\n</webui-paper>\n\n###### With this default option:\n\n<webui-paper class="pa-1">\n- Make sure you close the browser when you are done with the computer.\n- You will logout before leaving your device accessible to others.\n- You will stay logged in if you refresh the page, but be logged out once you close your ${hostType} or if visiting this ${appType} in a new tab or window.\n</webui-paper>\n<webui-flex grow></webui-flex>\n<webui-button wrap theme="${btnSesTheme}" data-trigger="${webui.storage.STORAGE_ACCEPTED_KEY}" data-value="${webui.storage.ACCEPT_SESSION_STORAGE}">\n    I confirm that I am using my personal device and that I understand the above statements and I accept the use of storing my data in the ${hostType} so my login and other data will be remembered until the I close the ${hostType}.\n</webui-button>\n`}),webui.setData("page-storage-consent-options",JSON.stringify(options))}webui.define("webui-myfi-storage-consent",{constructor:t=>{},setAcceptedKey:function(value){switch(value){case webui.storage.ACCEPT_LOCAL_STORAGE:webui.storage.acceptLocalStorage(),this.render();break;case webui.storage.ACCEPT_SESSION_STORAGE:webui.storage.acceptSessionStorage(),this.render()}},render:function(){build_options(),isDesktopApp||(this.innerHTML=webui.applyAppDataToContent(`\n## Storage Consent\n<webui-page-segment elevation="10">\n    <webui-paper>\n        <p>This ${appType} has multiple levels of data storage available for you to choose from, which will determine how data is stored on your device for this ${appType}.</p>\n        <p>Please note that modern browsers may persist sessions even after you close the browser. If you are not on your own secured device then please make sure you explicitly sign-out and close this tab when you are done with your session, regardless of which option you choose below.</p>\n    </webui-paper>\n    <webui-cards card-width="500" data-subscribe="page-storage-consent-options:setCards"></webui-cards>\n</webui-page-segment>\n`))},connected:t=>{t.addDataset("subscribe",`${webui.storage.STORAGE_ACCEPTED_KEY}:setAcceptedKey`),t.render()}})}