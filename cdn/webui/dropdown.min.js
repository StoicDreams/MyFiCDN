"use strict";webui.define("webui-dropdown",{preload:"fa",constructor:t=>{t._template=t.template.querySelector('slot[name="template"]');let optionTemplate=t.querySelector('[slot="template"]');function removeBugAttributes(){["style","label","value","preload"].forEach((key=>{t._select.removeAttribute(key)}))}optionTemplate&&(t._optionTemplate=webui.trimLinePreWhitespce(optionTemplate.innerHTML)),t.newid="",t.newlabel="New",t._label=t.template.querySelector("label"),t._select=t.template.querySelector("select"),t._icon=t.template.querySelector("webui-fa"),t._select.addEventListener("change",(_=>{t.value=t._select.value,console.log("select changed"),t.dispatchEvent(new Event("change",{bubbles:!0}))})),t.addEventListener("click",(ev=>{removeBugAttributes()})),t._select.addEventListener("focus",(ev=>{setTimeout((()=>{removeBugAttributes()}),0)})),t._select.addEventListener("blur",(ev=>{removeBugAttributes()})),t._select.addEventListener("click",(ev=>{removeBugAttributes()}))},attr:["theme","icon","label","stack","value","newid","newlabel"],attrChanged:(t,property,value)=>{switch(property){case"newid":case"newlabel":t._includeNew=!0;break;case"theme":t.setTheme(value);break;case"label":t._label.innerHTML=value;break;case"icon":break;case"value":t.setValue(value)}},connected:t=>{let id=webui.uuid();t.setTheme(t.theme||"primary"),t._label.setAttribute("for",id),t._select.setAttribute("id",id)},options:function(options){this.setOptions(options)},setOptions:function(options){let t=this;null==options&&(options=[]);let data=options.forEach?options:JSON.parse(options);if(!data.forEach)return void console.error("webui-dropdown data error: Invalid data loaded - Expecting an array of data.");let template=t._optionTemplate;if(t._select.innerHTML="",t._includeNew){let option=webui.create("option",{value:t.newid,html:t.newlabel});t._select.appendChild(option)}data.forEach((item=>{let id=t.dataset.id?item[t.dataset.id]:item.id;if(void 0===id&&void 0!==item.value&&(id=item.value),void 0===id)return void console.error("webui-dropdown data error: Option is missing id",item);let option=webui.create("option",{value:id});option.innerHTML=template?webui.replaceAppData(template,item):id,t._select.appendChild(option)}))},setValue:function(value){this.setOptions(value)},shadowTemplate:'\n<style type="text/css">\n:host {\ndisplay:flex;\ngap:var(--padding,1rem);\nposition:relative;\nbox-sizing:border-box;\nalign-items: center;\n}\n:host([stack]) {\nflex-direction:column;\n}\nselect {\ndisplay:block;\nflex-grow:1;\npadding: var(--padding,1rem);\nheight:100%;\n}\nlabel:empty {display:none;}\nlabel {\npadding:var(--padding,1rem);\n}\nslot[name="template"] {display:none;}\n</style>\n<label>\n<webui-fa></webui-fa>\n<slot name="label"></slot>\n<webui-fa></webui-fa>\n</label>\n<select><slot></slot></select>\n<slot name="template"></slot>\n'});